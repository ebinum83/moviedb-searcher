(this["webpackJsonpmoviedb-searcher"]=this["webpackJsonpmoviedb-searcher"]||[]).push([[0],{102:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(14),l=t.n(c),o=t(10),s=(t(50),t(8)),i=t(3),m=t(12),u=t(2),v=t(15),p=r.a.createContext(),f=t(5),d=t.n(f),b=t(13),E=t(40),g=t.n(E),h=t(24),y=t.n(h),O=t(41),j=t.n(O).a.create({baseURL:"https://api.themoviedb.org/3"});j.interceptors.request.use((function(e){return e.params=Object(u.a)(Object(u.a)({},e.params),{},{api_key:"85bf4579c13b19c5d1ae95ec26bd38b5"}),e}));var N=j,x=function(e){return function(){var a=Object(b.a)(d.a.mark((function a(t){var n,r;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,N.get("/movie/".concat(e));case 2:n=a.sent.data.results,r=n.sort((function(e,a){var t=y()(e.release_date);return y()(a.release_date).diff(t)})).slice(0,12),t({type:"FETCH_MOVIES",payload:r});case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},k=t(44);var w=function(e){var a=e.id,t=e.title,n=e.overview,c=e.poster_path,l=e.release_date,s=e.vote_average;return r.a.createElement("div",{className:"col-md-6 col-lg-4"},r.a.createElement("div",{className:"card mb-4 shadow-sm"},r.a.createElement("img",{src:c?"https://image.tmdb.org/t/p/w500/".concat(c):"https://via.placeholder.com/500.png/343a40/fff",className:"card-img-top poster",alt:t}),r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},t),r.a.createElement("h6",{className:"card-subtitle mb-2 text-muted"},l),r.a.createElement("p",{className:"card-text"},n.substring(0,100),"..."),r.a.createElement(o.b,{className:"btn btn-primary",to:"/movie/".concat(a)},"More Info")),r.a.createElement("div",{className:"card-footer text-muted"},r.a.createElement("span",null,"Rate"," ",s))))};var _=Object(n.memo)((function(e){var a=e.movies,t=Object(n.useCallback)((function(){return a.map((function(e){var a=e.id,t=Object(k.a)(e,["id"]);return r.a.createElement(w,Object.assign({key:a,id:a},t))}))}),[a]);return r.a.createElement("div",{className:"row"},t())})),C=[{value:"popular",label:"Popular"},{value:"top_rated",label:"Top Rated"},{value:"upcoming",label:"Upcoming"},{value:"now_playing",label:"Now Playing"}];var F=function(){var e=Object(n.useContext)(p),a=e.state.movies,t=e.dispatch,c=Object(n.useState)({moviesFilter:C[0]}),l=Object(s.a)(c,2),o=l[0].moviesFilter,i=l[1];return Object(n.useEffect)((function(){t(x("popular"))}),[t]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row mb-3"},r.a.createElement("div",{className:"col-12"},r.a.createElement(v.a,{name:"moviesFilter",value:o,onChange:function(e,a){i((function(t){return Object(u.a)(Object(u.a)({},t),{},Object(m.a)({},a.name,e))})),t(x(e.value))},options:C}))),r.a.createElement(_,{movies:a}))},S=function(e){return JSON.parse(localStorage.getItem(e))||[]},M=function(e,a,t){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=S(e),c=r.findIndex((function(e){return e.id===a}));-1===c?r.push(Object(u.a)({id:a},t)):r[c]=n?Object(u.a)({id:a},t):Object(u.a)(Object(u.a)({},r[c]),t),localStorage.setItem(e,JSON.stringify(r))};var T=Object(i.g)(r.a.memo((function(e){var a=e.history,t=e.fullWidth,c=Object(n.useState)(""),l=Object(s.a)(c,2),o=l[0],i=l[1],m=t?{flex:1}:null;return r.a.createElement("form",{className:"form-inline mt-2 mt-md-0"},r.a.createElement("input",{style:m,className:"form-control mr-sm-2",type:"text",placeholder:"Search","aria-label":"Search",value:o,onChange:function(e){i(e.target.value)}}),r.a.createElement("button",{className:"btn btn-outline-success my-2 my-sm-0",type:"submit",onClick:function(e){e.preventDefault(),a.push("/search/".concat(o))}},"Search"))})));var I=function(e){var a=e.collectionType,t=Object(n.useContext)(p),c=t.state.movies,l=t.dispatch,o=Object(n.useMemo)((function(){return S("movies").filter((function(e){var t=e.like,n=e.rating;return"rating"===a?n&&"0"!==n:"like"===a&&(t&&t)}))}),[a]);return Object(n.useEffect)((function(){var e;o.length>0&&l((e=o,function(){var a=Object(b.a)(d.a.mark((function a(t){var n;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Promise.all(e.map(function(){var e=Object(b.a)(d.a.mark((function e(a){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.id,e.next=3,N.get("/movie/".concat(t));case 3:return n=e.sent.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()));case 2:n=a.sent,t({type:"FETCH_MOVIES",payload:n});case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()))}),[l,o]),r.a.createElement(r.a.Fragment,null,o.length>0?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"jumbotron"},r.a.createElement("h3",{className:"cover-heading text-center"},"Your"," ","rating"===a?"Rated":"Favorite"," ","Movies")),r.a.createElement(_,{movies:c})):r.a.createElement("div",{className:"jumbotron"},r.a.createElement("h3",{className:"cover-heading text-center"},"Sorry you have no"," ","rating"===a?"rated":"favorite"," ","movies. Search for a movie to add to your favorites."),r.a.createElement(T,{fullWidth:!0})))};var R=function(){return r.a.createElement(I,{collectionType:"like"})};var D=function(){return r.a.createElement(I,{collectionType:"rating"})};var B=function(){return r.a.createElement("div",{className:"jumbotron"},r.a.createElement("h1",{className:"display-4"},"MovieDB Searcher"),r.a.createElement("p",{className:"lead"},"This is a simple web-app that help you manage your favorite films"),r.a.createElement("hr",{className:"my-4"}),r.a.createElement("img",{className:"logo",src:"".concat("/moviedb-searcher","/assets/image/movieDB-logo.png"),alt:"Movie DB Logo"}),r.a.createElement("span",null,"This product uses the TMDb API but is not endorsed or certified by TMDb."))},H=function(){for(var e=[],a=(new Date).getFullYear(),t=1920;t<=a;t++)e.push({value:t,label:t});return{years:e,yearLength:e.length}}(),Y=H.years,L=H.yearLength,V=[{value:"vote_average.desc",label:"Ratings (Highest First)"},{value:"vote_average.asc",label:"Ratings (Lowest First)"},{value:"primary_release_date.desc",label:"Release Date (Latest First)"},{value:"primary_release_date.asc",label:"Release Date (Oldest First)"},{value:"original_title.desc",label:"Title (A to Z)"},{value:"original_title.asc",label:" Title (Z to A)"}];var A=function(){var e=Object(n.useContext)(p),a=e.state,t=a.movies,c=a.genres,l=e.dispatch,o=Object(n.useState)({fromYear:Y[0],toYear:Y[L-1],genres:[],sortBy:V[0]}),i=Object(s.a)(o,2),f=i[0],E=f.fromYear,h=f.toYear,y=f.genres,O=f.sortBy,j=i[1];Object(n.useEffect)((function(){var e;l(function(){var e=Object(b.a)(d.a.mark((function e(a){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.get("/genre/movie/list");case 2:t=e.sent.data.genres,a({type:"FETCH_GENRES",payload:t});case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()),l(function(e,a,t,n){return function(){var r=Object(b.a)(d.a.mark((function r(c){var l,o,s;return d.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return l=Object(u.a)({"primary_release_date.gte":"".concat(e,"-01-01"),"primary_release_date.lte":"".concat(a,"-12-31"),sort_by:n},t.length>0&&{with_genres:t}),o=g.a.stringify(l,{arrayFormat:"comma"}),r.next=4,N.get("/discover/movie?".concat(o));case 4:s=r.sent.data.results.slice(0,12),c({type:"FETCH_MOVIES",payload:s});case 6:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}(E.value,h.value,(e=y,Array.isArray(e)?e.map((function(e){return e.value})):[]),O.value))}),[E,h,y,O,l]);var x=Object(n.useMemo)((function(){return c.map((function(e){return{value:e.id,label:e.name}}))}),[c]),k=function(e,a){j((function(t){return Object(u.a)(Object(u.a)({},t),{},Object(m.a)({},a.name,e))}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row mb-3"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h3",{className:"mb-3"},"Discover Movies"),r.a.createElement("form",null,r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-2 col-form-label"},"From Year"),r.a.createElement(v.a,{className:"col-sm-4",name:"fromYear",value:E,onChange:k,options:Y}),r.a.createElement("label",{className:"col-sm-2 col-form-label"},"To Year"),r.a.createElement(v.a,{className:"col-sm-4",name:"toYear",value:h,onChange:k,options:Y})),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-2 col-form-label"},"Genres"),r.a.createElement(v.a,{className:"col-sm-10",name:"genres",value:y,onChange:k,options:x,isMulti:!0})),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-2 col-form-label"},"Sort By"),r.a.createElement(v.a,{className:"col-sm-10",name:"sortBy",value:O,onChange:k,options:V}))))),r.a.createElement(_,{movies:t}))};var P=function(){var e=Object(n.useContext)(p),a=e.state.movie,t=a.id,c=void 0===t?0:t,l=a.poster_path,o=void 0===l?"https://via.placeholder.com/800.png/343a40/fff":l,v=a.title,f=void 0===v?"":v,E=a.release_date,g=void 0===E?"":E,h=a.overview,y=void 0===h?"":h,O=a.vote_average,j=void 0===O?0:O,x=e.dispatch,k=Object(n.useMemo)((function(){return function(e,a){return S(e).find((function(e){return e.id===a}))}("movies",c)}),[c]),w={rating:k?k.rating:"0",like:!!k&&k.like},_=Object(n.useState)(w),C=Object(s.a)(_,2),F=C[0],T=F.rating,I=F.like,R=C[1];Object(n.useEffect)((function(){R(w)}),[c]);var D=Object(i.f)().movieId;return Object(n.useEffect)((function(){x(function(e){return function(){var a=Object(b.a)(d.a.mark((function a(t){var n;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,N.get("/movie/".concat(e));case 2:n=a.sent.data,t({type:"FETCH_MOVIE",payload:n});case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(D))}),[x,D]),r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"card mb-4 shadow-sm"},r.a.createElement("img",{src:"https://image.tmdb.org/t/p/original/".concat(o),className:"card-img-top",alt:f}),r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},f),r.a.createElement("h6",{className:"card-subtitle mb-2 text-muted"},g),r.a.createElement("p",{className:"card-text"},y)),r.a.createElement("div",{className:"card-footer text-muted text-center"},r.a.createElement("span",null,"Rate"," ",j),r.a.createElement("form",{className:"form-inline justify-content-center"},r.a.createElement("label",{className:"my-1 mr-2",htmlFor:"rating"},"My Ratings",r.a.createElement("select",{className:"custom-select ml-2 my-1 mr-sm-2",name:"rating",id:"rating",value:T,onChange:function(e){var a=e.target,t=a.name,n=a.value;R((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(m.a)({},t,n))})),M("movies",c,{rating:n})}},r.a.createElement("option",{value:"0"},"Not rated"),r.a.createElement("option",{value:"1"},"\u2605"),r.a.createElement("option",{value:"2"},"\u2605\u2605"),r.a.createElement("option",{value:"3"},"\u2605\u2605\u2605"),r.a.createElement("option",{value:"4"},"\u2605\u2605\u2605\u2605"),r.a.createElement("option",{value:"5"},"\u2605\u2605\u2605\u2605\u2605"))),r.a.createElement("button",{type:"button",className:"btn btn-primary ml-2",name:"like",onClick:function(){R((function(e){return Object(u.a)(Object(u.a)({},e),{},{like:!I})})),M("movies",c,{like:!I})}},I?"Unlike":"Like")))))};var J=function(){var e=Object(n.useContext)(p),a=e.state.movies,t=e.dispatch,c=Object(i.f)().terms;return Object(n.useEffect)((function(){t(function(e){return function(){var a=Object(b.a)(d.a.mark((function a(t){var n;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,N.get("/search/movie?query=".concat(e));case 2:n=a.sent.data.results,t({type:"FETCH_MOVIES",payload:n});case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(c))}),[t,c]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row mb-3"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h1",{className:"display-5 text-center"},"Search >"," ",c))),r.a.createElement(_,{movies:a}))};var W=function(){return r.a.createElement(i.c,null,r.a.createElement(i.a,{path:"/favorite",component:R}),r.a.createElement(i.a,{path:"/rate",component:D}),r.a.createElement(i.a,{path:"/about",component:B}),r.a.createElement(i.a,{path:"/discover",component:A}),r.a.createElement(i.a,{path:"/movie/:movieId",component:P}),r.a.createElement(i.a,{path:"/search/:terms",component:J}),r.a.createElement(i.a,{component:F}))};var G=function(e,a){switch(a.type){case"FETCH_MOVIES":return Object(u.a)(Object(u.a)({},e),{},{movies:a.payload});case"FETCH_MOVIE":return Object(u.a)(Object(u.a)({},e),{},{movie:a.payload});case"FETCH_GENRES":return Object(u.a)(Object(u.a)({},e),{},{genres:a.payload});default:return e}},U=t(43),q=[{link:"/",text:"Home"},{link:"/favorite",text:"My Favorites"},{link:"/rate",text:"My Rates"},{link:"/discover",text:"Discover"},{link:"/about",text:"About"}];var Z=Object(i.g)(r.a.memo((function(e){var a=e.location.pathname;return r.a.createElement("header",null,r.a.createElement("nav",{className:"navbar navbar-expand-md navbar-dark fixed-top bg-dark"},r.a.createElement(o.b,{className:"navbar-brand",to:"/"},"MovieDB Searcher"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarCollapse","aria-controls":"navbarCollapse","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarCollapse"},r.a.createElement("ul",{className:"navbar-nav mr-auto"},q.map((function(e){var t=e.link,n=e.text;return r.a.createElement("li",{className:"nav-item ".concat(Object(U.a)(a===t&&"active")),key:t},r.a.createElement(o.b,{className:"nav-link",to:t},n))}))),r.a.createElement(T,null))))})));var $=r.a.memo((function(){return r.a.createElement("footer",{className:"container"},r.a.createElement("p",{className:"float-right"},r.a.createElement("a",{href:"#"},"Back to top")),r.a.createElement("p",null,"Made with \u2764 by Daryl Ebinum\xa9 2021"))}));var z=function(e,a){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e},r=Object(n.useState)(t(a)),c=Object(s.a)(r,2),l=c[0],o=c[1],i=Object(n.useRef)(l),m=Object(n.useCallback)((function(){return i.current}),[i]),u=Object(n.useCallback)((function(e){i.current=e,o(e)}),[i,o]),v=Object(n.useCallback)((function(a){return e(m(),a)}),[e,m]),p=Object(n.useCallback)((function(e){return"function"===typeof e?e(p,m):u(v(e))}),[m,u,v]);return[l,p]},K={movies:[],movie:{},genres:[]};var Q=function(){var e=z(G,K),a=Object(s.a)(e,2),t=a[0],n=a[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(p.Provider,{value:{state:t,dispatch:n}},r.a.createElement(Z,null),r.a.createElement("main",null,r.a.createElement("div",{className:"container"},r.a.createElement(W,null))),r.a.createElement($,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(o.a,null,r.a.createElement(Q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},45:function(e,a,t){e.exports=t(102)},50:function(e,a,t){},61:function(e,a){}},[[45,1,2]]]);
//# sourceMappingURL=main.380c4c56.chunk.js.map